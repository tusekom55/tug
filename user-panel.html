<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Dashboard - GlobalTradePro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0e1a;
            color: #ffffff;
            overflow-x: hidden;
        }
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sol Navigasyon Paneli */
        .sidebar {
            width: 260px;
            background: linear-gradient(180deg, #1a1f2e 0%, #151a26 100%);
            border-right: 1px solid #2a2f3e;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 0 20px 30px;
            border-bottom: 1px solid #2a2f3e;
            margin-bottom: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: #00d4aa;
        }
        
        .nav-menu {
            padding: 0 10px;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: #8b8fa3;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .nav-link:hover, .nav-link.active {
            background: #2a2f3e;
            color: #00d4aa;
        }
        
        .nav-link i {
            width: 20px;
            text-align: center;
        }
        
        /* Ana İçerik Alanı */
        .main-content {
            margin-left: 260px;
            flex: 1;
            min-height: 100vh;
        }
        
        .top-bar {
            background: #151a26;
            border-bottom: 1px solid #2a2f3e;
            padding: 15px 30px;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        
        .top-bar-left {
            flex: 1;
            display: flex;
            align-items: center;
        }
        
        .mobile-menu-btn {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 15px;
            transition: all 0.3s ease;
        }
        
        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
        }
        
        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .balance-display {
            background: linear-gradient(135deg, #00d4aa 0%, #00a87a 100%);
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }
        
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: #00d4aa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
        }
        
        .logout-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .logout-btn:hover {
            background: #ff3742;
        }
        
        /* İçerik Alanı */
        .content-area {
            padding: 30px;
            min-height: calc(100vh - 80px);
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .section-header {
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .section-subtitle {
            color: #8b8fa3;
            font-size: 16px;
        }
        
        /* Kart Komponenti */
        .card {
            background: linear-gradient(135deg, #1e2530 0%, #1a1f2e 100%);
            border: 1px solid #2a2f3e;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        /* Grid Layout */
        .grid {
            display: grid;
            gap: 20px;
        }
        
        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }
        
        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }
        
        /* Loading Spinner */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: #8b8fa3;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #2a2f3e;
            border-top: 2px solid #00d4aa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Market Table Styles */
        .market-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .add-to-portfolio-btn {
            background: linear-gradient(135deg, #00d4aa 0%, #00a87a 100%);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }
        
        .add-to-portfolio-btn:hover {
            background: linear-gradient(135deg, #00a87a 0%, #008a66 100%);
            transform: translateY(-1px);
        }
        
        tbody tr {
            border-bottom: 1px solid #1a1f2e;
            transition: background-color 0.2s ease;
        }
        
        tbody tr:hover {
            background-color: #1a1f2e;
        }
        
        /* Professional Trading Platform Styles */
        .trading-container {
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
            border-radius: 16px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .trading-header {
            background: linear-gradient(135deg, #1e2742 0%, #2a3f5f 100%);
            padding: 20px 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .trading-title {
            color: #ffffff;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .trading-subtitle {
            color: #8896ab;
            font-size: 14px;
            font-weight: 500;
        }
        
        .trading-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            color: #8896ab;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .filter-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            transform: translateY(-1px);
        }
        
        .filter-btn.active {
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            color: #ffffff;
            border-color: #29b6f6;
            box-shadow: 0 4px 12px rgba(79, 195, 247, 0.3);
        }
        
        .trading-panel {
            background: linear-gradient(135deg, #141927 0%, #1e2742 100%);
            border-radius: 12px;
            margin: 16px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .panel-header {
            background: linear-gradient(135deg, #2a3f5f 0%, #1e2742 100%);
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .panel-title {
            color: #ffffff;
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .panel-subtitle {
            color: #8896ab;
            font-size: 13px;
        }
        
        .trade-direction-container {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            padding: 0 4px;
        }
        
        .trade-direction-btn {
            flex: 1;
            padding: 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            color: #8896ab;
            border-radius: 12px;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .trade-direction-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 10px;
            padding: 2px;
            background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: subtract;
        }
        
        .trade-direction-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .trade-direction-btn.active {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
            border-color: #4caf50;
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }
        
        .trade-direction-btn.active[data-direction="short"] {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            border-color: #f44336;
            box-shadow: 0 8px 25px rgba(244, 67, 54, 0.4);
        }
        
        .trading-form-group {
            margin-bottom: 20px;
        }
        
        .trading-label {
            display: block;
            color: #8896ab;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .trading-input, .trading-select {
            width: 100%;
            padding: 12px 16px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .trading-input:focus, .trading-select:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 0 3px rgba(79, 195, 247, 0.1);
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        }
        
        .trade-calculation-panel {
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.1) 0%, rgba(41, 182, 246, 0.05) 100%);
            border: 1px solid rgba(79, 195, 247, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            backdrop-filter: blur(20px);
        }
        
        .calculation-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .calculation-row:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        
        .calculation-label {
            color: #8896ab;
            font-size: 13px;
            font-weight: 600;
        }
        
        .calculation-value {
            color: #ffffff;
            font-size: 14px;
            font-weight: 700;
        }
        
        .calculation-value.positive {
            color: #4caf50;
        }
        
        .calculation-value.negative {
            color: #f44336;
        }
        
        .trade-open-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            color: #ffffff;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .trade-open-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .trade-open-btn:hover::before {
            left: 100%;
        }
        
        .trade-open-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(79, 195, 247, 0.4);
        }
        
        .trade-open-btn:disabled {
            background: linear-gradient(135deg, #2a2f3e 0%, #1a1f2e 100%);
            color: #8896ab;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .forex-pair-item {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .forex-pair-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
            transition: width 0.3s ease;
        }
        
        .forex-pair-item:hover {
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.05) 0%, rgba(41, 182, 246, 0.02) 100%);
            transform: translateX(4px);
        }
        
        .forex-pair-item:hover::before {
            width: 4px;
        }
        
        .forex-pair-item.selected {
            background: linear-gradient(135deg, rgba(79, 195, 247, 0.15) 0%, rgba(41, 182, 246, 0.08) 100%);
            transform: translateX(8px);
        }
        
        .forex-pair-item.selected::before {
            width: 4px;
        }
        
        .pair-symbol {
            font-size: 16px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }
        
        .pair-category {
            font-size: 12px;
            color: #8896ab;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .pair-price {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .pair-spread {
            font-size: 12px;
            color: #8896ab;
        }
        
        .price-up {
            color: #4caf50;
        }
        
        .price-down {
            color: #f44336;
        }
        
        .position-item {
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .position-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .position-item.profit {
            border-left: 4px solid #4caf50;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(76, 175, 80, 0.05) 100%);
        }
        
        .position-item.loss {
            border-left: 4px solid #f44336;
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, rgba(244, 67, 54, 0.05) 100%);
        }
        
        .no-selection-message {
            text-align: center;
            padding: 60px 40px;
            color: #8896ab;
        }
        
                 .no-selection-icon {
             font-size: 64px;
             margin-bottom: 20px;
             opacity: 0.3;
             background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
             -webkit-background-clip: text;
             -webkit-text-fill-color: transparent;
         }
         
         /* Trading Modal Styles */
         .trading-modal {
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             z-index: 10000;
             display: flex;
             align-items: center;
             justify-content: center;
         }
         
         .modal-overlay {
             position: absolute;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(0, 0, 0, 0.8);
             backdrop-filter: blur(10px);
         }
         
         .modal-container {
             position: relative;
             width: 95%;
             height: 90%;
             max-width: 1400px;
             background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
             border-radius: 16px;
             overflow: hidden;
             box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
             border: 1px solid rgba(255, 255, 255, 0.1);
             transform: scale(0.95);
             opacity: 0;
             transition: all 0.3s ease;
         }
         
         .modal-header {
             background: linear-gradient(135deg, #1e2742 0%, #2a3f5f 100%);
             padding: 20px 24px;
             border-bottom: 1px solid rgba(255, 255, 255, 0.1);
             display: flex;
             justify-content: space-between;
             align-items: center;
         }
         
         .modal-title-section h2 {
             color: #ffffff;
             font-size: 24px;
             font-weight: 700;
             margin-bottom: 8px;
         }
         
         .modal-coin-info {
             display: flex;
             gap: 16px;
             align-items: center;
         }
         
         .modal-coin-info span {
             font-size: 14px;
             font-weight: 600;
         }
         
         #modalCoinSymbol {
             color: #8896ab;
             background: rgba(255, 255, 255, 0.1);
             padding: 4px 8px;
             border-radius: 4px;
         }
         
         #modalCoinPrice {
             color: #ffffff;
             font-size: 18px;
         }
         
         .price-change {
             padding: 4px 8px;
             border-radius: 4px;
             font-weight: 700;
         }
         
         .price-change.positive {
             background: rgba(76, 175, 80, 0.2);
             color: #4caf50;
         }
         
         .price-change.negative {
             background: rgba(244, 67, 54, 0.2);
             color: #f44336;
         }
         
         .modal-close-btn {
             background: rgba(255, 255, 255, 0.1);
             border: 1px solid rgba(255, 255, 255, 0.2);
             color: #8896ab;
             width: 40px;
             height: 40px;
             border-radius: 8px;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .modal-close-btn:hover {
             background: rgba(244, 67, 54, 0.2);
             border-color: #f44336;
             color: #f44336;
         }
         
         .modal-content {
             display: grid;
             grid-template-columns: 1fr 400px;
             height: calc(100% - 80px);
         }
         
         .chart-panel {
             background: linear-gradient(135deg, #141927 0%, #1e2742 100%);
             border-right: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .chart-header {
             padding: 16px 20px;
             border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .chart-controls {
             display: flex;
             justify-content: space-between;
             align-items: center;
         }
         
         .timeframe-buttons {
             display: flex;
             gap: 8px;
         }
         
         .timeframe-btn {
             padding: 8px 12px;
             background: rgba(255, 255, 255, 0.05);
             color: #8896ab;
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 6px;
             font-size: 12px;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .timeframe-btn:hover, .timeframe-btn.active {
             background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
             border-color: #4fc3f7;
             color: #ffffff;
         }
         
         .chart-tools {
             display: flex;
             gap: 8px;
         }
         
         .tool-btn {
             padding: 8px;
             background: rgba(255, 255, 255, 0.05);
             color: #8896ab;
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 6px;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .tool-btn:hover {
             background: rgba(255, 255, 255, 0.1);
             color: #ffffff;
         }
         
         .chart-container {
             height: calc(100% - 70px);
             position: relative;
         }
         
         .chart-placeholder {
             height: 100%;
             display: flex;
             align-items: center;
             justify-content: center;
         }
         
         .chart-loading {
             text-align: center;
             color: #8896ab;
         }
         
         .chart-icon {
             font-size: 64px;
             margin-bottom: 20px;
             color: #4fc3f7;
         }
         
         .chart-loading h3 {
             color: #ffffff;
             margin-bottom: 12px;
         }
         
         .chart-features {
             margin-top: 24px;
             font-size: 14px;
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 8px;
         }
         
         .order-panel {
             background: linear-gradient(135deg, #1a1f2e 0%, #2a2f3e 100%);
             display: flex;
             flex-direction: column;
         }
         
         .order-header {
             padding: 16px 20px;
             border-bottom: 1px solid rgba(255, 255, 255, 0.1);
         }
         
         .order-tabs {
             display: flex;
             gap: 8px;
         }
         
         .order-tab {
             padding: 8px 16px;
             background: rgba(255, 255, 255, 0.05);
             color: #8896ab;
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 6px;
             font-size: 14px;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .order-tab.active {
             background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%);
             border-color: #4fc3f7;
             color: #ffffff;
         }
         
         .order-content {
             padding: 20px;
             flex: 1;
             overflow-y: auto;
         }
         
         .order-direction-toggle {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 12px;
             margin-bottom: 24px;
         }
         
         .direction-btn {
             padding: 16px;
             border: 2px solid rgba(255, 255, 255, 0.1);
             background: rgba(255, 255, 255, 0.05);
             border-radius: 8px;
             cursor: pointer;
             transition: all 0.3s ease;
             text-align: center;
         }
         
         .direction-btn .btn-text {
             display: block;
             font-weight: 700;
             font-size: 16px;
             margin-bottom: 4px;
         }
         
         .direction-btn .btn-subtitle {
             font-size: 12px;
             opacity: 0.8;
         }
         
         .buy-btn {
             color: #4caf50;
         }
         
         .buy-btn.active {
             background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
             border-color: #4caf50;
             color: #ffffff;
         }
         
         .sell-btn {
             color: #f44336;
         }
         
         .sell-btn.active {
             background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
             border-color: #f44336;
             color: #ffffff;
         }
         
         .form-group {
             margin-bottom: 20px;
         }
         
         .form-label {
             display: block;
             color: #8896ab;
             font-size: 14px;
             font-weight: 600;
             margin-bottom: 8px;
         }
         
         .form-select, .form-input {
             width: 100%;
             padding: 12px 16px;
             background: rgba(255, 255, 255, 0.05);
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 8px;
             color: #ffffff;
             font-size: 14px;
             transition: all 0.3s ease;
         }
         
         .form-select:focus, .form-input:focus {
             outline: none;
             border-color: #4fc3f7;
             box-shadow: 0 0 0 3px rgba(79, 195, 247, 0.1);
         }
         
         .input-group {
             position: relative;
         }
         
         .input-suffix {
             position: absolute;
             right: 16px;
             top: 50%;
             transform: translateY(-50%);
             color: #8896ab;
             font-size: 14px;
             font-weight: 600;
         }
         
         .amount-tabs {
             display: flex;
             gap: 8px;
             margin-bottom: 12px;
         }
         
         .amount-tab {
             flex: 1;
             padding: 8px;
             background: rgba(255, 255, 255, 0.05);
             color: #8896ab;
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 6px;
             font-size: 12px;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .amount-tab.active {
             background: #4fc3f7;
             border-color: #4fc3f7;
             color: #ffffff;
         }
         
         .percentage-buttons {
             display: grid;
             grid-template-columns: repeat(4, 1fr);
             gap: 8px;
             margin-top: 12px;
         }
         
         .percent-btn {
             padding: 8px;
             background: rgba(255, 255, 255, 0.05);
             color: #8896ab;
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 6px;
             font-size: 12px;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s ease;
         }
         
         .percent-btn:hover {
             background: #4fc3f7;
             border-color: #4fc3f7;
             color: #ffffff;
         }
         
         .order-summary {
             background: rgba(79, 195, 247, 0.1);
             border: 1px solid rgba(79, 195, 247, 0.2);
             border-radius: 8px;
             padding: 16px;
             margin-bottom: 20px;
         }
         
         .summary-row {
             display: flex;
             justify-content: space-between;
             margin-bottom: 8px;
         }
         
         .summary-row:last-child {
             margin-bottom: 0;
         }
         
         .summary-label {
             color: #8896ab;
             font-size: 14px;
         }
         
         .summary-value {
             color: #ffffff;
             font-weight: 600;
             font-size: 14px;
         }
         
         .execute-btn {
             width: 100%;
             padding: 16px;
             border: none;
             border-radius: 8px;
             font-size: 16px;
             font-weight: 700;
             cursor: pointer;
             transition: all 0.3s ease;
             margin-bottom: 20px;
         }
         
         .execute-btn.buy-order {
             background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
             color: #ffffff;
         }
         
         .execute-btn.sell-order {
             background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
             color: #ffffff;
         }
         
         .execute-btn:hover:not(:disabled) {
             transform: translateY(-2px);
             box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
         }
         
         .execute-btn:disabled {
             background: #2a2f3e;
             color: #8896ab;
             cursor: not-allowed;
         }
         
         .advanced-options {
             border-top: 1px solid rgba(255, 255, 255, 0.1);
             padding-top: 20px;
         }
         
         .advanced-toggle {
             width: 100%;
             background: none;
             border: none;
             color: #8896ab;
             font-size: 14px;
             font-weight: 600;
             padding: 12px 0;
             cursor: pointer;
             transition: color 0.3s ease;
         }
         
         .advanced-toggle:hover {
             color: #4fc3f7;
         }
         
         .advanced-content {
             margin-top: 16px;
         }
         
                 /* Mobile Responsive Styles */
       @media (max-width: 768px) {
           .sidebar {
               transform: translateX(-100%);
               transition: transform 0.3s ease;
               z-index: 1001;
           }
           
           .sidebar.mobile-open {
               transform: translateX(0);
           }
           
           .mobile-overlay {
               display: none;
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background: rgba(0, 0, 0, 0.5);
               z-index: 1000;
           }
           
           .mobile-overlay.active {
               display: block;
           }
           
           .main-content {
               margin-left: 0;
           }
           
           .content-area {
               padding: 20px;
           }
           
           .grid-2, .grid-3 {
               grid-template-columns: 1fr;
           }
           
           /* Trading Modal Mobile Optimization */
           .modal-container {
               width: 98%;
               height: 95%;
               max-width: none;
           }
           
           .modal-content {
               grid-template-columns: 1fr;
               grid-template-rows: 1fr auto;
               overflow: hidden;
           }
           
           .chart-panel {
               border-right: none;
               border-bottom: 1px solid rgba(255, 255, 255, 0.1);
               min-height: 280px;
               height: auto;
           }
           
           .order-panel {
               min-height: auto;
               max-height: 50vh;
               overflow-y: auto;
           }
           
           .chart-header {
               padding: 12px 16px;
           }
           
           .timeframe-buttons {
               gap: 4px;
               flex-wrap: wrap;
           }
           
           .timeframe-btn {
               padding: 6px 8px;
               font-size: 11px;
           }
           
           .chart-tools {
               gap: 4px;
           }
           
           .tool-btn {
               padding: 6px;
               font-size: 12px;
           }
           
           .order-content {
               padding: 16px;
           }
           
           .order-direction-toggle {
               grid-template-columns: 1fr 1fr;
               gap: 8px;
               margin-bottom: 20px;
           }
           
           .direction-btn {
               padding: 12px;
           }
           
           .direction-btn .btn-text {
               font-size: 14px;
           }
           
           .direction-btn .btn-subtitle {
               font-size: 11px;
           }
           
           .form-group {
               margin-bottom: 16px;
           }
           
           .form-label {
               font-size: 13px;
               margin-bottom: 6px;
           }
           
           .form-select, .form-input {
               padding: 10px 12px;
               font-size: 13px;
           }
           
           .percentage-buttons {
               grid-template-columns: repeat(4, 1fr);
               gap: 6px;
               margin-top: 10px;
           }
           
           .percent-btn {
               padding: 6px;
               font-size: 11px;
           }
           
           .order-summary {
               padding: 12px;
               margin-bottom: 16px;
           }
           
           .summary-row {
               margin-bottom: 6px;
           }
           
           .summary-label, .summary-value {
               font-size: 13px;
           }
           
           .execute-btn {
               padding: 14px;
               font-size: 15px;
               margin-bottom: 16px;
           }
           
           .advanced-toggle {
               padding: 10px 0;
               font-size: 13px;
           }
           
           /* Coins Grid Mobile */
           .coins-grid {
               grid-template-columns: 1fr;
               gap: 12px;
           }
           
           .coin-card {
               padding: 12px;
           }
           
           .coin-info h3 {
               font-size: 14px;
           }
           
           .coin-price {
               font-size: 13px;
           }
           
           .coin-change {
               font-size: 11px;
               padding: 2px 6px;
           }
           
           .coin-actions {
               margin-top: 8px;
           }
           
           .trade-btn {
               padding: 6px 12px;
               font-size: 11px;
           }
       }

       /* Extra Small Mobile Devices */
       @media (max-width: 480px) {
           .main-content {
               width: 100%;
           }
           
           .top-bar {
               padding: 12px 16px;
           }
           
           .mobile-menu-btn {
               display: block;
           }
           
           .user-profile .user-name {
               font-size: 14px;
           }
           
           .user-profile .user-balance {
               font-size: 12px;
           }
           
           /* Full Screen Mobile Trading Modal */
           .modal-container {
               width: 100%;
               height: 100%;
               border-radius: 0;
               max-height: 100vh;
           }
           
           .modal-header {
               padding: 16px 20px;
           }
           
           .modal-title-section h2 {
               font-size: 18px;
               margin-bottom: 6px;
           }
           
           .modal-coin-info {
               gap: 10px;
           }
           
           .modal-coin-info span {
               font-size: 12px;
           }
           
           #modalCoinPrice {
               font-size: 15px;
           }
           
           .chart-panel {
               min-height: 220px;
           }
           
           .chart-header {
               padding: 10px 16px;
           }
           
           .timeframe-buttons {
               gap: 3px;
           }
           
           .timeframe-btn {
               padding: 5px 6px;
               font-size: 10px;
           }
           
           .order-content {
               padding: 12px;
           }
           
           .order-direction-toggle {
               margin-bottom: 16px;
           }
           
           .direction-btn {
               padding: 10px;
           }
           
           .direction-btn .btn-text {
               font-size: 13px;
           }
           
           .form-group {
               margin-bottom: 12px;
           }
           
           .form-select, .form-input {
               padding: 8px 10px;
               font-size: 12px;
           }
           
           .execute-btn {
               padding: 12px;
               font-size: 14px;
               margin-bottom: 12px;
           }
           
           .coin-card {
               padding: 10px;
           }
           
           .coin-info h3 {
               font-size: 13px;
           }
           
           .coin-price {
               font-size: 12px;
           }
       }

       /* Landscape Mobile */
       @media (max-width: 768px) and (orientation: landscape) {
           .modal-content {
               grid-template-columns: 1fr 320px;
               grid-template-rows: 1fr;
           }
           
           .chart-panel {
               border-right: 1px solid rgba(255, 255, 255, 0.1);
               border-bottom: none;
               min-height: auto;
           }
           
           .order-panel {
               min-height: auto;
               max-height: none;
           }
       }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Mobile Overlay -->
        <div class="mobile-overlay" onclick="closeMobileMenu()"></div>
        
        <!-- Sol Navigasyon Paneli -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>TradePro</span>
                </div>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item">
                    <a href="#" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="portfolio">
                        <i class="fas fa-briefcase"></i>
                        <span>Portföyüm</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="markets">
                        <i class="fas fa-coins"></i>
                        <span>Piyasalar</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="trading">
                        <i class="fas fa-exchange-alt"></i>
                        <span>İşlem Yap</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="recommendations">
                        <i class="fas fa-lightbulb"></i>
                        <span>Tavsiyeler</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="wallet">
                        <i class="fas fa-wallet"></i>
                        <span>Cüzdan</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link" data-section="profile">
                        <i class="fas fa-user"></i>
                        <span>Profil</span>
                    </a>
                </div>
            </nav>
        </aside>
        
        <!-- Ana İçerik Alanı -->
        <main class="main-content">
            <!-- Üst Bar -->
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="top-bar-right">
                    <div class="balance-display" id="userBalance">
                        <i class="fas fa-spinner fa-spin"></i> Yükleniyor...
                    </div>
                    <div class="user-menu">
                        <div class="user-avatar" id="userAvatar">?</div>
                    </div>
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Çıkış
                    </button>
                </div>
            </header>
            
            <!-- İçerik Alanları -->
            <div class="content-area">
                
                <!-- Dashboard Bölümü -->
                <section class="content-section active" id="dashboard">
                    <div class="section-header">
                        <h2 class="section-title">Hoş Geldiniz</h2>
                        <p class="section-subtitle">Trading hesabınızın genel durumu</p>
                    </div>
                    
                    <div class="grid grid-3">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Toplam Bakiye</h3>
                                <i class="fas fa-wallet" style="color: #00d4aa;"></i>
                            </div>
                            <div id="totalBalance" class="loading">
                                <div class="spinner"></div>
                                Yükleniyor...
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Günlük Kazanç</h3>
                                <i class="fas fa-chart-line" style="color: #00d4aa;"></i>
                            </div>
                            <div id="dailyPnl" class="loading">
                                <div class="spinner"></div>
                                Hesaplanıyor...
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Açık Pozisyonlar</h3>
                                <i class="fas fa-chart-pie" style="color: #00d4aa;"></i>
                            </div>
                            <div id="openPositions" class="loading">
                                <div class="spinner"></div>
                                Yükleniyor...
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Son İşlemler</h3>
                            </div>
                            <div id="recentTrades" class="loading">
                                <div class="spinner"></div>
                                Yükleniyor...
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Piyasa Özetı</h3>
                            </div>
                            <div id="marketSummary" class="loading">
                                <div class="spinner"></div>
                                Yükleniyor...
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Diğer bölümler buraya eklenecek -->
                <section class="content-section" id="portfolio">
                    <div class="section-header">
                        <h2 class="section-title">Portföyüm</h2>
                        <p class="section-subtitle">Sahip olduğunuz varlıklar</p>
                    </div>
                    <div class="card">
                        <p>Portföy içeriği yakında eklenecek...</p>
                    </div>
                </section>
                
                <section class="content-section" id="markets">
                    <div class="section-header">
                        <h2 class="section-title">Piyasalar</h2>
                        <p class="section-subtitle">Crypto para fiyatları ve piyasa verileri</p>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Kripto Para Piyasası</h3>
                            <div class="market-controls">
                                <input type="text" id="coinSearch" placeholder="Coin ara..." style="padding: 8px 12px; border: 1px solid #2a2f3e; background: #1e2530; color: white; border-radius: 6px; width: 200px;">
                                <button onclick="refreshMarketData()" style="padding: 8px 12px; background: #00d4aa; color: white; border: none; border-radius: 6px; margin-left: 10px; cursor: pointer;">
                                    <i class="fas fa-sync-alt"></i> Yenile
                                </button>
                            </div>
                        </div>
                        
                        <div id="marketLoader" class="loading">
                            <div class="spinner"></div>
                            Piyasa verileri yükleniyor...
                        </div>
                        
                        <div id="marketTable" style="display: none;">
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="border-bottom: 1px solid #2a2f3e;">
                                            <th style="padding: 12px; text-align: left; color: #8b8fa3; font-weight: 600;">#</th>
                                            <th style="padding: 12px; text-align: left; color: #8b8fa3; font-weight: 600;">Coin</th>
                                            <th style="padding: 12px; text-align: right; color: #8b8fa3; font-weight: 600;">Fiyat</th>
                                            <th style="padding: 12px; text-align: right; color: #8b8fa3; font-weight: 600;">24s %</th>
                                            <th style="padding: 12px; text-align: right; color: #8b8fa3; font-weight: 600;">Piyasa Değeri</th>
                                            <th style="padding: 12px; text-align: center; color: #8b8fa3; font-weight: 600;">İşlem</th>
                                        </tr>
                                    </thead>
                                    <tbody id="marketTableBody">
                                        <!-- Coin verileri buraya yüklenecek -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="content-section" id="trading">
                    <div class="trading-container">
                        <div class="trading-header">
                            <h2 class="trading-title">Professional Trading</h2>
                            <p class="trading-subtitle">Advanced Forex, Indices & Commodities Platform</p>
                            
                            <div class="trading-filters">
                                <button class="filter-btn active" data-category="all">All Markets</button>
                                <button class="filter-btn" data-category="major">Major Pairs</button>
                                <button class="filter-btn" data-category="minor">Minor Pairs</button>
                                <button class="filter-btn" data-category="indices">Indices</button>
                                <button class="filter-btn" data-category="commodities">Commodities</button>
                            </div>
                        </div>
                        
                        <!-- Trading Workspace -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0; height: 600px;">
                            <!-- Sol Panel: Market Watch -->
                            <div class="trading-panel" style="border-radius: 0; margin: 0; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                                <div class="panel-header">
                                    <h3 class="panel-title">Market Watch</h3>
                                    <p class="panel-subtitle">Real-time quotes and spreads</p>
                                </div>
                                
                                <div id="forexPairsContainer" style="height: 480px; overflow-y: auto;">
                                    <div class="loading" id="forexLoader" style="margin: 60px 0;">
                                        <div class="spinner"></div>
                                        Loading market data...
                                    </div>
                                    <div id="forexPairsList" style="display: none;"></div>
                                </div>
                            </div>
                            
                            <!-- Sağ Panel: Trading Terminal -->
                            <div class="trading-panel" style="border-radius: 0; margin: 0;">
                                <div class="panel-header">
                                    <h3 class="panel-title">Trading Terminal</h3>
                                    <div id="selectedPairInfo" class="panel-subtitle">
                                        Select an instrument to start trading
                                    </div>
                                </div>
                                
                                <div style="padding: 24px; height: 480px; overflow-y: auto;">
                                    <div id="tradingForm" style="display: none;">
                                        <!-- Direction Selection -->
                                        <div class="trade-direction-container">
                                            <button class="trade-direction-btn active" id="longBtn" data-direction="long">
                                                <i class="fas fa-arrow-up"></i>
                                                <div style="margin-top: 4px;">BUY / LONG</div>
                                            </button>
                                            <button class="trade-direction-btn" id="shortBtn" data-direction="short">
                                                <i class="fas fa-arrow-down"></i>
                                                <div style="margin-top: 4px;">SELL / SHORT</div>
                                            </button>
                                        </div>
                                        
                                        <!-- Trading Parameters -->
                                        <div class="trading-form-group">
                                            <label class="trading-label">Volume (Lots)</label>
                                            <select id="lotSize" class="trading-select">
                                                <option value="0.01">0.01 (Micro Lot)</option>
                                                <option value="0.1">0.1 (Mini Lot)</option>
                                                <option value="1.0">1.0 (Standard Lot)</option>
                                                <option value="5.0">5.0 (Large Lot)</option>
                                                <option value="10.0">10.0 (Institutional)</option>
                                            </select>
                                        </div>
                                        
                                        <div class="trading-form-group">
                                            <label class="trading-label">Leverage Ratio</label>
                                            <select id="leverageRatio" class="trading-select">
                                                <option value="10">1:10 (Conservative)</option>
                                                <option value="50">1:50 (Moderate)</option>
                                                <option value="100" selected>1:100 (Standard)</option>
                                                <option value="200">1:200 (Aggressive)</option>
                                                <option value="500">1:500 (Professional)</option>
                                            </select>
                                        </div>
                                        
                                        <!-- Risk Management -->
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                            <div class="trading-form-group">
                                                <label class="trading-label">Stop Loss</label>
                                                <input type="number" id="stopLoss" class="trading-input" placeholder="0.00000" step="0.00001">
                                            </div>
                                            <div class="trading-form-group">
                                                <label class="trading-label">Take Profit</label>
                                                <input type="number" id="takeProfit" class="trading-input" placeholder="0.00000" step="0.00001">
                                            </div>
                                        </div>
                                        
                                        <!-- Trade Calculation -->
                                        <div class="trade-calculation-panel">
                                            <div class="calculation-row">
                                                <span class="calculation-label">Required Margin</span>
                                                <span class="calculation-value" id="requiredMargin">$0.00</span>
                                            </div>
                                            <div class="calculation-row">
                                                <span class="calculation-label">Pip Value</span>
                                                <span class="calculation-value" id="pipValue">$0.00</span>
                                            </div>
                                            <div class="calculation-row">
                                                <span class="calculation-label">Spread</span>
                                                <span class="calculation-value negative" id="spreadValue">0.0 pips</span>
                                            </div>
                                            <div class="calculation-row">
                                                <span class="calculation-label">Contract Size</span>
                                                <span class="calculation-value" id="contractSize">100,000</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Execute Trade -->
                                        <button id="openTradeBtn" class="trade-open-btn" disabled>
                                            <i class="fas fa-bolt"></i> Execute Trade
                                        </button>
                                    </div>
                                    
                                    <!-- No Selection State -->
                                    <div id="noSelectionMessage" class="no-selection-message">
                                        <div class="no-selection-icon">
                                            <i class="fas fa-chart-line"></i>
                                        </div>
                                        <h3 style="margin-bottom: 12px; color: #ffffff;">Ready to Trade</h3>
                                        <p>Select an instrument from Market Watch to begin professional trading</p>
                                        <div style="margin-top: 24px; font-size: 12px; color: #8896ab;">
                                            <div>✓ Advanced risk management</div>
                                            <div>✓ Real-time execution</div>
                                            <div>✓ Professional tools</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Open Positions Panel -->
                    <div class="trading-container" style="margin-top: 24px;">
                        <div class="trading-header">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h3 class="trading-title" style="font-size: 18px; margin-bottom: 4px;">Open Positions</h3>
                                    <p class="trading-subtitle">Active trades and P&L monitoring</p>
                                </div>
                                <button onclick="refreshPositions()" style="padding: 10px 16px; background: linear-gradient(135deg, #4fc3f7 0%, #29b6f6 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div style="padding: 24px;">
                            <div id="openPositionsContainer">
                                <div class="loading" id="positionsLoader" style="margin: 40px 0;">
                                    <div class="spinner"></div>
                                    Loading positions...
                                </div>
                                <div id="openPositionsList" style="display: none;"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Trading Modal -->
                <div id="tradingModal" class="trading-modal" style="display: none;">
                    <div class="modal-overlay" onclick="closeTradingModal()"></div>
                    <div class="modal-container">
                        <div class="modal-header">
                            <div class="modal-title-section">
                                <h2 id="modalCoinName">Bitcoin</h2>
                                <div class="modal-coin-info">
                                    <span id="modalCoinSymbol">BTC</span>
                                    <span id="modalCoinPrice">$45,000.00</span>
                                    <span id="modalCoinChange" class="price-change positive">+2.5%</span>
                                </div>
                            </div>
                            <button class="modal-close-btn" onclick="closeTradingModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="modal-content">
                            <!-- Sol Panel: Grafik -->
                            <div class="chart-panel">
                                <div class="chart-header">
                                    <div class="chart-controls">
                                        <div class="timeframe-buttons">
                                            <button class="timeframe-btn active" data-timeframe="1m">1m</button>
                                            <button class="timeframe-btn" data-timeframe="5m">5m</button>
                                            <button class="timeframe-btn" data-timeframe="15m">15m</button>
                                            <button class="timeframe-btn" data-timeframe="1h">1h</button>
                                            <button class="timeframe-btn" data-timeframe="4h">4h</button>
                                            <button class="timeframe-btn" data-timeframe="1d">1D</button>
                                        </div>
                                        <div class="chart-tools">
                                            <button class="tool-btn" title="Fullscreen">
                                                <i class="fas fa-expand"></i>
                                            </button>
                                            <button class="tool-btn" title="Settings">
                                                <i class="fas fa-cog"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="chart-container" id="tradingChart">
                                    <!-- TradingView widget buraya gelecek -->
                                    <div class="chart-placeholder">
                                        <div class="chart-loading">
                                            <i class="fas fa-chart-line chart-icon"></i>
                                            <h3>Advanced Trading Chart</h3>
                                            <p>Professional TradingView integration</p>
                                            <div class="chart-features">
                                                <div>✓ Real-time data</div>
                                                <div>✓ Technical indicators</div>
                                                <div>✓ Drawing tools</div>
                                                <div>✓ Multiple timeframes</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Sağ Panel: Trading Form -->
                            <div class="order-panel">
                                <div class="order-header">
                                    <div class="order-tabs">
                                        <button class="order-tab active" data-tab="spot">Spot Trading</button>
                                        <button class="order-tab" data-tab="margin">Margin</button>
                                    </div>
                                </div>
                                
                                <div class="order-content">
                                    <!-- Buy/Sell Toggle -->
                                    <div class="order-direction-toggle">
                                        <button class="direction-btn buy-btn active" data-direction="buy">
                                            <span class="btn-text">BUY</span>
                                            <span class="btn-subtitle" id="buyPrice">$45,000</span>
                                        </button>
                                        <button class="direction-btn sell-btn" data-direction="sell">
                                            <span class="btn-text">SELL</span>
                                            <span class="btn-subtitle" id="sellPrice">$44,980</span>
                                        </button>
                                    </div>
                                    
                                    <!-- Order Type -->
                                    <div class="form-group">
                                        <label class="form-label">Order Type</label>
                                        <select id="orderType" class="form-select">
                                            <option value="market">Market Order</option>
                                            <option value="limit">Limit Order</option>
                                            <option value="stop_limit">Stop-Limit</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Price (Limit orders) -->
                                    <div class="form-group" id="priceGroup" style="display: none;">
                                        <label class="form-label">Price (USD)</label>
                                        <div class="input-group">
                                            <input type="number" id="orderPrice" class="form-input" placeholder="0.00" step="0.01">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Amount Selection -->
                                    <div class="form-group">
                                        <label class="form-label">Amount</label>
                                        <div class="amount-tabs">
                                            <button class="amount-tab active" data-type="quantity">Quantity</button>
                                            <button class="amount-tab" data-type="total">Total (USD)</button>
                                        </div>
                                    </div>
                                    
                                    <!-- Quantity Input -->
                                    <div class="form-group" id="quantityGroup">
                                        <div class="input-group">
                                            <input type="number" id="orderQuantity" class="form-input" placeholder="0.00" step="0.00001">
                                            <span class="input-suffix" id="quantitySuffix">BTC</span>
                                        </div>
                                        <div class="percentage-buttons">
                                            <button class="percent-btn" data-percent="25">25%</button>
                                            <button class="percent-btn" data-percent="50">50%</button>
                                            <button class="percent-btn" data-percent="75">75%</button>
                                            <button class="percent-btn" data-percent="100">100%</button>
                                        </div>
                                    </div>
                                    
                                    <!-- Total Input -->
                                    <div class="form-group" id="totalGroup" style="display: none;">
                                        <div class="input-group">
                                            <input type="number" id="orderTotal" class="form-input" placeholder="0.00" step="0.01">
                                            <span class="input-suffix">USD</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Order Summary -->
                                    <div class="order-summary">
                                        <div class="summary-row">
                                            <span class="summary-label">Available Balance:</span>
                                            <span class="summary-value" id="availableBalance">$1,000.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <span class="summary-label">Order Total:</span>
                                            <span class="summary-value" id="orderTotalValue">$0.00</span>
                                        </div>
                                        <div class="summary-row">
                                            <span class="summary-label">Fee (0.1%):</span>
                                            <span class="summary-value" id="tradingFee">$0.00</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Execute Button -->
                                    <button id="executeOrderBtn" class="execute-btn buy-order" disabled>
                                        <i class="fas fa-bolt"></i>
                                        <span id="executeText">Buy BTC</span>
                                    </button>
                                    
                                    <!-- Advanced Options -->
                                    <div class="advanced-options">
                                        <button class="advanced-toggle" onclick="toggleAdvancedOptions()">
                                            <i class="fas fa-chevron-down"></i>
                                            Advanced Options
                                        </button>
                                        <div class="advanced-content" id="advancedContent" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Stop Loss</label>
                                                <input type="number" id="stopLoss" class="form-input" placeholder="Optional" step="0.01">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Take Profit</label>
                                                <input type="number" id="takeProfit" class="form-input" placeholder="Optional" step="0.01">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <section class="content-section" id="recommendations">
                    <div class="section-header">
                        <h2 class="section-title">Yatırım Tavsiyeleri</h2>
                        <p class="section-subtitle">AI destekli öneriler</p>
                    </div>
                    <div class="card">
                        <p>Tavsiye sistemi yakında eklenecek...</p>
                    </div>
                </section>
                
                <section class="content-section" id="wallet">
                    <div class="section-header">
                        <h2 class="section-title">Cüzdan</h2>
                        <p class="section-subtitle">Para yatır/çek</p>
                    </div>
                    <div class="card">
                        <p>Cüzdan işlemleri yakında eklenecek...</p>
                    </div>
                </section>
                
                <section class="content-section" id="profile">
                    <div class="section-header">
                        <h2 class="section-title">Profil</h2>
                        <p class="section-subtitle">Hesap ayarları</p>
                    </div>
                    <div class="card">
                        <div id="userInfo" class="loading">
                            <div class="spinner"></div>
                            Yükleniyor...
                        </div>
                    </div>
                </section>
                
            </div>
        </main>
    </div>

    <script>
        // Sayfa yüklendiğinde
        document.addEventListener('DOMContentLoaded', function() {
            loadUserInfo();
            setupNavigation();
            refreshMarketData(); // Sayfa yüklendiğinde piyasaları yükle
            initTrading(); // Trading sistemini başlat
            refreshPositions(); // Pozisyonları yükle
            
            // Arama kutusu için event listener
            const searchInput = document.getElementById('coinSearch');
            let searchTimeout;
            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    refreshMarketData();
                }, 500); // 500ms gecikme ile arama yap
            });
        });

        // Navigasyon sistemi
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            const pageTitle = document.getElementById('pageTitle');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetSection = this.dataset.section;
                    
                    // Aktif nav linkini güncelle
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Bölümleri gizle/göster
                    sections.forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(targetSection).classList.add('active');
                    
                    // Sayfa başlığını güncelle
                    const titles = {
                        'dashboard': 'Dashboard',
                        'portfolio': 'Portföyüm',
                        'markets': 'Piyasalar',
                        'trading': 'İşlem Yap',
                        'recommendations': 'Yatırım Tavsiyeleri',
                        'wallet': 'Cüzdan',
                        'profile': 'Profil'
                    };
                    pageTitle.textContent = titles[targetSection] || 'Dashboard';
                });
            });
        }

        // Kullanıcı bilgilerini yükle
        function loadUserInfo() {
            fetch('backend/public/profile.php', {
                method: 'GET',
                credentials: 'include'
            })
            .then(r => r.json())
            .then(data => {
                if(data.success) {
                    // Bakiye göster
                    const balance = parseFloat(data.user.balance);
                    document.getElementById('userBalance').innerHTML = 
                        `<i class="fas fa-wallet"></i> ₺${balance.toLocaleString()}`;
                    
                    document.getElementById('totalBalance').innerHTML = 
                        `<h1 style="font-size: 2rem; color: #00d4aa;">₺${balance.toLocaleString()}</h1>`;
                    
                    // Avatar harfi
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    document.getElementById('userAvatar').textContent = firstLetter;
                    
                    // Profil bilgileri
                    document.getElementById('userInfo').innerHTML = `
                        <div style="line-height: 1.8;">
                            <p><strong>Kullanıcı Adı:</strong> ${data.user.username}</p>
                            <p><strong>Email:</strong> ${data.user.email}</p>
                            <p><strong>Kayıt Tarihi:</strong> ${new Date(data.user.created_at).toLocaleDateString('tr-TR')}</p>
                            <p><strong>Hesap Tipi:</strong> ${data.user.role === 'admin' ? 'Yönetici' : 'Standart'}</p>
                            <p><strong>Toplam Bakiye:</strong> <span style="color: #00d4aa; font-weight: 600;">₺${balance.toLocaleString()}</span></p>
                        </div>
                    `;
                    
                    // Diğer dashboard verilerini simüle et
                    setTimeout(() => {
                        document.getElementById('dailyPnl').innerHTML = 
                            `<h2 style="color: #00d4aa;">+₺156.24</h2><small style="color: #8b8fa3;">+2.34%</small>`;
                        
                        document.getElementById('openPositions').innerHTML = 
                            `<h2 style="color: #ffffff;">3</h2><small style="color: #8b8fa3;">Aktif pozisyon</small>`;
                        
                        document.getElementById('recentTrades').innerHTML = 
                            `<p style="color: #8b8fa3;">Henüz işlem yapılmamış</p>`;
                        
                        document.getElementById('marketSummary').innerHTML = 
                            `<p style="color: #8b8fa3;">Piyasa verileri yükleniyor...</p>`;
                    }, 1000);
                    
                } else {
                    window.location.href = 'login.html';
                }
            })
            .catch(err => {
                window.location.href = 'login.html';
            });
        }

        // Çıkış yap
        function logout() {
            fetch('backend/public/logout.php', {
                method: 'GET',
                credentials: 'include'
            })
            .then(() => {
                window.location.href = 'login.html';
            });
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.mobile-overlay');
            
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('active');
        }

        // Close mobile menu
        function closeMobileMenu() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.mobile-overlay');
            
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
        }

        // Close mobile menu when clicking navigation items
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', closeMobileMenu);
        });

                 // Hibrit sistem - Veritabanı + API kombinasyonu
         async function fetchMarketData() {
             const searchInput = document.getElementById('coinSearch').value.toLowerCase();
             const marketLoader = document.getElementById('marketLoader');
             const marketTable = document.getElementById('marketTable');
             const marketTableBody = document.getElementById('marketTableBody');

             marketLoader.style.display = 'block';
             marketTable.style.display = 'none';
             marketTableBody.innerHTML = '';

             try {
                 // Hibrit endpoint'den veri çek
                 const params = new URLSearchParams({
                     limit: 50,
                     search: searchInput
                 });
                 
                 const response = await fetch(`backend/user/coins_hybrid.php?${params}`, {
                     method: 'GET',
                     credentials: 'include'
                 });
                 
                 const result = await response.json();

                 if (result.success && result.coins && result.coins.length > 0) {
                     result.coins.forEach((coin, index) => {
                         const priceChangeColor = coin.price_change_24h >= 0 ? '#00d4aa' : '#ff4757';
                         const priceChangeIcon = coin.price_change_24h >= 0 ? '▲' : '▼';
                         const priceSourceIcon = coin.price_source === 'api' ? '🟢' : '🔴';
                         const priceSourceText = coin.price_source === 'api' ? 'Canlı' : 'Sabit';
                         
                         const row = document.createElement('tr');
                         row.innerHTML = `
                             <td style="padding: 12px; text-align: left; color: #8b8fa3;">${coin.sira || index + 1}</td>
                             <td style="padding: 12px; text-align: left;">
                                 <div style="display: flex; align-items: center; gap: 8px;">
                                     <img src="${coin.logo_url}" alt="${coin.coin_adi}" style="width: 24px; height: 24px; border-radius: 50%;" onerror="this.src='https://via.placeholder.com/24x24/444/fff?text=${coin.coin_kodu.charAt(0)}'">
                                     <div>
                                         <div style="color: #ffffff; font-weight: 600;">${coin.coin_adi}</div>
                                         <div style="color: #8b8fa3; font-size: 12px;">
                                             ${coin.coin_kodu} 
                                             <span style="font-size: 10px; margin-left: 4px;" title="Fiyat Kaynağı: ${priceSourceText}">
                                                 ${priceSourceIcon}
                                             </span>
                                         </div>
                                     </div>
                                 </div>
                             </td>
                             <td style="padding: 12px; text-align: right; color: #ffffff; font-weight: 600;">
                                 $${parseFloat(coin.current_price).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 8 })}
                             </td>
                             <td style="padding: 12px; text-align: right; color: ${priceChangeColor}; font-weight: 600;">
                                 ${priceChangeIcon} ${Math.abs(coin.price_change_24h).toFixed(2)}%
                             </td>
                             <td style="padding: 12px; text-align: right; color: #8b8fa3;">
                                 $${parseInt(coin.market_cap || 0).toLocaleString()}
                             </td>
                             <td style="padding: 12px; text-align: center;">
                                 <button onclick="openTradingModal('${coin.coingecko_id}', '${coin.coin_adi}', '${coin.current_price}')" class="add-to-portfolio-btn">
                                     <i class="fas fa-exchange-alt"></i> İşlem
                                 </button>
                             </td>
                         `;
                         marketTableBody.appendChild(row);
                     });
                     
                     marketTable.style.display = 'block';
                     
                     // API aktif coin sayısını göster
                     if (result.api_active_count > 0) {
                         const infoRow = document.createElement('tr');
                         infoRow.innerHTML = `
                             <td colspan="6" style="text-align: center; padding: 10px; background: #1a1f2e; color: #8b8fa3; font-size: 12px;">
                                 📊 ${result.total_count} coin yüklendi | 🟢 ${result.api_active_count} canlı fiyat | 🔴 ${result.total_count - result.api_active_count} sabit fiyat
                             </td>
                         `;
                         marketTableBody.appendChild(infoRow);
                     }
                     
                 } else {
                     marketTableBody.innerHTML = `
                         <tr>
                             <td colspan="6" style="text-align: center; color: #8b8fa3; padding: 40px;">
                                 ${searchInput ? 'Aradığınız kripto para bulunamadı.' : 'Coin listesi yüklenemedi.'}
                                 <br><small style="color: #666;">Veritabanında coin bulunamadı. populate_coins.php çalıştırın.</small>
                             </td>
                         </tr>
                     `;
                     marketTable.style.display = 'block';
                 }
             } catch (error) {
                 console.error('Error fetching market data:', error);
                 marketTableBody.innerHTML = `
                     <tr>
                         <td colspan="6" style="text-align: center; color: #ff4757; padding: 40px;">
                             <i class="fas fa-exclamation-triangle"></i> Veri çekme hatası oluştu.
                             <br><small style="color: #888;">Backend bağlantısı kontrol edin.</small>
                         </td>
                     </tr>
                 `;
                 marketTable.style.display = 'block';
             } finally {
                 marketLoader.style.display = 'none';
             }
         }

                 // Trading modalını aç
         function openTradingModal(coinId, coinName, currentPrice) {
             const modal = document.getElementById('tradingModal');
             
             // Coin bilgilerini modal'a yükle
             document.getElementById('modalCoinName').textContent = coinName;
             document.getElementById('modalCoinSymbol').textContent = coinId.toUpperCase();
             document.getElementById('modalCoinPrice').textContent = `$${parseFloat(currentPrice).toLocaleString()}`;
             
             // Random değişim % (gerçek API'den gelecek)
             const change = (Math.random() - 0.5) * 10;
             const changeElement = document.getElementById('modalCoinChange');
             changeElement.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
             changeElement.className = `price-change ${change >= 0 ? 'positive' : 'negative'}`;
             
             // Buy/Sell fiyatlarını güncelle
             const buyPrice = parseFloat(currentPrice) * 1.001; // 0.1% spread
             const sellPrice = parseFloat(currentPrice) * 0.999;
             document.getElementById('buyPrice').textContent = `$${buyPrice.toFixed(2)}`;
             document.getElementById('sellPrice').textContent = `$${sellPrice.toFixed(2)}`;
             
             // Quantity suffix'i güncelle
             document.getElementById('quantitySuffix').textContent = coinId.toUpperCase();
             document.getElementById('executeText').textContent = `Buy ${coinId.toUpperCase()}`;
             
             // Modal'ı göster
             modal.style.display = 'flex';
             
             // Modal açılma animasyonu
             setTimeout(() => {
                 const container = modal.querySelector('.modal-container');
                 container.style.transform = 'scale(1)';
                 container.style.opacity = '1';
             }, 10);
             
             // Trading modalı için event listener'ları kurulum
             setupTradingModalEvents();
         }

         // Trading modalını kapat
         function closeTradingModal() {
             const modal = document.getElementById('tradingModal');
             const container = modal.querySelector('.modal-container');
             
             container.style.transform = 'scale(0.95)';
             container.style.opacity = '0';
             
             setTimeout(() => {
                 modal.style.display = 'none';
             }, 200);
         }

         // Trading modal event listener'ları
         function setupTradingModalEvents() {
             // Direction toggle
             document.querySelectorAll('.direction-btn').forEach(btn => {
                 btn.addEventListener('click', function() {
                     document.querySelectorAll('.direction-btn').forEach(b => b.classList.remove('active'));
                     this.classList.add('active');
                     
                     const direction = this.dataset.direction;
                     const executeBtn = document.getElementById('executeOrderBtn');
                     const executeText = document.getElementById('executeText');
                     const coinSymbol = document.getElementById('modalCoinSymbol').textContent;
                     
                     if (direction === 'buy') {
                         executeBtn.className = 'execute-btn buy-order';
                         executeText.textContent = `Buy ${coinSymbol}`;
                     } else {
                         executeBtn.className = 'execute-btn sell-order';
                         executeText.textContent = `Sell ${coinSymbol}`;
                     }
                 });
             });

             // Order type değişikliği
             document.getElementById('orderType').addEventListener('change', function() {
                 const priceGroup = document.getElementById('priceGroup');
                 if (this.value === 'limit' || this.value === 'stop_limit') {
                     priceGroup.style.display = 'block';
                 } else {
                     priceGroup.style.display = 'none';
                 }
             });

             // Amount tabs
             document.querySelectorAll('.amount-tab').forEach(tab => {
                 tab.addEventListener('click', function() {
                     document.querySelectorAll('.amount-tab').forEach(t => t.classList.remove('active'));
                     this.classList.add('active');
                     
                     const type = this.dataset.type;
                     const quantityGroup = document.getElementById('quantityGroup');
                     const totalGroup = document.getElementById('totalGroup');
                     
                     if (type === 'quantity') {
                         quantityGroup.style.display = 'block';
                         totalGroup.style.display = 'none';
                     } else {
                         quantityGroup.style.display = 'none';
                         totalGroup.style.display = 'block';
                     }
                 });
             });

             // Percentage buttons
             document.querySelectorAll('.percent-btn').forEach(btn => {
                 btn.addEventListener('click', function() {
                     const percent = parseInt(this.dataset.percent);
                     const balance = 1000; // User balance (gerçek değer backend'den gelecek)
                     const price = parseFloat(document.getElementById('modalCoinPrice').textContent.replace('$', '').replace(',', ''));
                     
                     const totalAmount = (balance * percent) / 100;
                     const quantity = totalAmount / price;
                     
                     document.getElementById('orderQuantity').value = quantity.toFixed(6);
                     updateOrderSummary();
                 });
             });

             // Input değişiklikleri
             ['orderQuantity', 'orderTotal', 'orderPrice'].forEach(id => {
                 const element = document.getElementById(id);
                 if (element) {
                     element.addEventListener('input', updateOrderSummary);
                 }
             });

             // Timeframe buttons
             document.querySelectorAll('.timeframe-btn').forEach(btn => {
                 btn.addEventListener('click', function() {
                     document.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('active'));
                     this.classList.add('active');
                 });
             });

             // Execute order
             document.getElementById('executeOrderBtn').addEventListener('click', executeOrder);
         }

         // Order özeti güncelle
         function updateOrderSummary() {
             const quantity = parseFloat(document.getElementById('orderQuantity').value) || 0;
             const price = parseFloat(document.getElementById('modalCoinPrice').textContent.replace('$', '').replace(',', '')) || 0;
             const orderPrice = parseFloat(document.getElementById('orderPrice').value) || price;
             
             const total = quantity * orderPrice;
             const fee = total * 0.001; // 0.1% fee
             const totalWithFee = total + fee;
             
             document.getElementById('orderTotalValue').textContent = `$${total.toFixed(2)}`;
             document.getElementById('tradingFee').textContent = `$${fee.toFixed(2)}`;
             
             // Execute button'ı etkinleştir/devre dışı bırak
             const executeBtn = document.getElementById('executeOrderBtn');
             executeBtn.disabled = quantity <= 0 || total <= 0;
         }

         // Order'ı execute et
         function executeOrder() {
             const coinSymbol = document.getElementById('modalCoinSymbol').textContent;
             const direction = document.querySelector('.direction-btn.active').dataset.direction;
             const quantity = document.getElementById('orderQuantity').value;
             const orderType = document.getElementById('orderType').value;
             const total = document.getElementById('orderTotalValue').textContent;
             
             alert(`🚀 ${direction.toUpperCase()} Order Placed!\n\n` +
                   `Symbol: ${coinSymbol}\n` +
                   `Type: ${orderType.toUpperCase()}\n` +
                   `Quantity: ${quantity}\n` +
                   `Total: ${total}\n\n` +
                   `Order will be executed in real trading system.`);
             
             // Demo için modal'ı kapat
             closeTradingModal();
         }

         // Advanced options toggle
         function toggleAdvancedOptions() {
             const content = document.getElementById('advancedContent');
             const icon = document.querySelector('.advanced-toggle i');
             
             if (content.style.display === 'none') {
                 content.style.display = 'block';
                 icon.style.transform = 'rotate(180deg)';
             } else {
                 content.style.display = 'none';
                 icon.style.transform = 'rotate(0deg)';
             }
         }

        // Sayfa yüklendiğinde piyasaları yükle
        async function refreshMarketData() {
            await fetchMarketData();
        }

        // Trading sistem değişkenleri
        let selectedForexPair = null;
        let currentTradeDirection = 'long';

        // Trading sistemini başlat
        function initTrading() {
            loadForexPairs();
            setupTradingEventListeners();
        }

        // Forex pair'leri yükle
        async function loadForexPairs() {
            const forexLoader = document.getElementById('forexLoader');
            const forexPairsList = document.getElementById('forexPairsList');

            try {
                // Şimdilik mock data kullan - sonra backend endpoint eklenecek
                const mockForexData = [
                    { id: 1, symbol: 'EURUSD', display_name: 'EUR/USD', category: 'major', current_price: 1.08500, bid_price: 1.08480, ask_price: 1.08520, spread: 4.0, pip_value: 0.0001, max_leverage: 500 },
                    { id: 2, symbol: 'GBPUSD', display_name: 'GBP/USD', category: 'major', current_price: 1.26800, bid_price: 1.26780, ask_price: 1.26820, spread: 4.0, pip_value: 0.0001, max_leverage: 500 },
                    { id: 3, symbol: 'USDJPY', display_name: 'USD/JPY', category: 'major', current_price: 148.250, bid_price: 148.230, ask_price: 148.270, spread: 4.0, pip_value: 0.01, max_leverage: 500 },
                    { id: 4, symbol: 'XAUUSD', display_name: 'Gold', category: 'commodities', current_price: 2685.50, bid_price: 2685.00, ask_price: 2686.00, spread: 10.0, pip_value: 0.01, max_leverage: 200 },
                    { id: 5, symbol: 'US30', display_name: 'Dow Jones', category: 'indices', current_price: 42580.50, bid_price: 42578.0, ask_price: 42583.0, spread: 5.0, pip_value: 1.0, max_leverage: 100 }
                ];

                renderForexPairs(mockForexData);
                forexLoader.style.display = 'none';
                forexPairsList.style.display = 'block';

            } catch (error) {
                console.error('Forex pairs yükleme hatası:', error);
                forexPairsList.innerHTML = '<p style="color: #ff4757; text-align: center; padding: 20px;">Forex verileri yüklenemedi</p>';
                forexLoader.style.display = 'none';
                forexPairsList.style.display = 'block';
            }
        }

        // Forex pair'leri renderla
        function renderForexPairs(pairs) {
            const container = document.getElementById('forexPairsList');
            container.innerHTML = '';

            pairs.forEach(pair => {
                const priceDirection = Math.random() > 0.5 ? 'up' : 'down';
                const priceColor = priceDirection === 'up' ? '#00d4aa' : '#ff4757';
                const priceIcon = priceDirection === 'up' ? '▲' : '▼';

                const pairElement = document.createElement('div');
                pairElement.className = 'forex-pair-item';
                pairElement.dataset.pairId = pair.id;
                pairElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div class="pair-symbol">${pair.display_name}</div>
                            <div class="pair-category">${pair.category} • Max Leverage 1:${pair.max_leverage}</div>
                        </div>
                        <div style="text-align: right; min-width: 120px;">
                            <div class="pair-price ${priceDirection === 'up' ? 'price-up' : 'price-down'}">
                                ${pair.current_price} ${priceIcon}
                            </div>
                            <div class="pair-spread">Spread ${pair.spread} pips</div>
                        </div>
                    </div>
                `;

                pairElement.addEventListener('click', () => selectForexPair(pair));
                container.appendChild(pairElement);
            });
        }

        // Forex pair seç
        function selectForexPair(pair) {
            selectedForexPair = pair;

            // Seçili pair'i görsel olarak işaretle
            document.querySelectorAll('.forex-pair-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelector(`[data-pair-id="${pair.id}"]`).classList.add('selected');

            // Trading form'unu aktif et
            document.getElementById('tradingForm').style.display = 'block';
            document.getElementById('noSelectionMessage').style.display = 'none';

            // Pair bilgilerini güncelle
            document.getElementById('selectedPairInfo').innerHTML = `
                <strong>${pair.display_name}</strong> | Price: ${pair.current_price} | Spread: ${pair.spread} pips | Max Leverage: 1:${pair.max_leverage}
            `;

            // Kaldıraç seçeneklerini güncelle
            updateLeverageOptions(pair.max_leverage);

            // Hesaplamaları güncelle
            updateTradeCalculations();
        }

        // Kaldıraç seçeneklerini güncelle
        function updateLeverageOptions(maxLeverage) {
            const leverageSelect = document.getElementById('leverageRatio');
            leverageSelect.innerHTML = '';

            const leverageOptions = [10, 50, 100, 200, 500].filter(lev => lev <= maxLeverage);
            leverageOptions.forEach(leverage => {
                const option = document.createElement('option');
                option.value = leverage;
                option.textContent = `1:${leverage}`;
                if (leverage === 100 && leverage <= maxLeverage) option.selected = true;
                leverageSelect.appendChild(option);
            });
        }

        // Trade hesaplamalarını güncelle
        function updateTradeCalculations() {
            if (!selectedForexPair) return;

            const lotSize = parseFloat(document.getElementById('lotSize').value);
            const leverage = parseInt(document.getElementById('leverageRatio').value);

            // Basit margin hesaplaması
            const contractSize = 100000; // Standard lot size
            const price = selectedForexPair.current_price;
            const requiredMargin = (lotSize * contractSize * price) / leverage;

            // Pip değeri hesaplama
            const pipValue = lotSize * contractSize * selectedForexPair.pip_value;

            // DOM'u güncelle
            document.getElementById('requiredMargin').textContent = `$${requiredMargin.toFixed(2)}`;
            document.getElementById('pipValue').textContent = `$${pipValue.toFixed(2)}`;
            document.getElementById('spreadValue').textContent = `${selectedForexPair.spread} pips`;
            document.getElementById('contractSize').textContent = `${(lotSize * contractSize).toLocaleString()}`;

            // Trade butonunu aktif et
            document.getElementById('openTradeBtn').disabled = false;
        }

        // Trading event listener'ları kurulum
        function setupTradingEventListeners() {
            // Direction buttons
            document.getElementById('longBtn').addEventListener('click', function() {
                setTradeDirection('long');
            });
            document.getElementById('shortBtn').addEventListener('click', function() {
                setTradeDirection('short');
            });

            // Form değişiklikleri
            ['lotSize', 'leverageRatio'].forEach(id => {
                document.getElementById(id).addEventListener('change', updateTradeCalculations);
            });

            // Trade açma butonu
            document.getElementById('openTradeBtn').addEventListener('click', openTrade);

            // Kategori filtreleri
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Filter logic burada eklenecek
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        // Trade direction değiştir
        function setTradeDirection(direction) {
            currentTradeDirection = direction;
            document.querySelectorAll('.trade-direction-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(direction + 'Btn').classList.add('active');
        }

        // Trade aç
        async function openTrade() {
            if (!selectedForexPair) {
                alert('Lütfen bir forex pair seçin');
                return;
            }

            const tradeData = {
                pair_id: selectedForexPair.id,
                trade_type: currentTradeDirection,
                lot_size: parseFloat(document.getElementById('lotSize').value),
                leverage_ratio: parseInt(document.getElementById('leverageRatio').value),
                stop_loss: document.getElementById('stopLoss').value || null,
                take_profit: document.getElementById('takeProfit').value || null
            };

            try {
                // Şimdilik mock response - sonra gerçek backend endpoint eklenecek
                console.log('Trade açılıyor:', tradeData);
                
                alert(`🚀 ${selectedForexPair.display_name} için ${currentTradeDirection.toUpperCase()} pozisyonu açıldı!\n\nLot: ${tradeData.lot_size}\nKaldıraç: 1:${tradeData.leverage_ratio}\n\nPozisyon yönetimi için backend entegrasyonu yakında...`);
                
                // Form'u resetle
                resetTradingForm();
                
            } catch (error) {
                console.error('Trade açma hatası:', error);
                alert('Trade açılırken hata oluştu');
            }
        }

        // Trading form'unu resetle
        function resetTradingForm() {
            document.getElementById('stopLoss').value = '';
            document.getElementById('takeProfit').value = '';
            updateTradeCalculations();
        }

        // Pozisyonları yenile
        function refreshPositions() {
            const positionsLoader = document.getElementById('positionsLoader');
            const positionsList = document.getElementById('openPositionsList');
            
            positionsLoader.style.display = 'block';
            positionsList.style.display = 'none';
            
            // Mock pozisyon verisi
            setTimeout(() => {
                positionsList.innerHTML = `
                    <div style="text-align: center; color: #8b8fa3; padding: 30px;">
                        <i class="fas fa-chart-line" style="font-size: 48px; margin-bottom: 15px; opacity: 0.3;"></i>
                        <p>Açık pozisyon bulunmuyor</p>
                        <small>Forex pair seçerek trading başlayabilirsiniz</small>
                    </div>
                `;
                positionsLoader.style.display = 'none';
                positionsList.style.display = 'block';
            }, 1000);
        }
    </script>
</body>
</html> 